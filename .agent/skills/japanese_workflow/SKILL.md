---
name: japanese_workflow
description: 日本語でのタスク管理と実装計画作成を強制するワークフロー
---

# 日本語ワークフロー

このスキルは、タスクの開始時に必ず実行し、全ての成果物とコミュニケーションを日本語で行うことを保証します。

## ルール

1.  **全言語日本語**: ユーザーへのメッセージ、作成するドキュメント（コード内の例外や識別子を除く）は全て日本語で行ってください。
2.  **アーティファクト管理**: `agentic_mode` の標準アーティファクト (`task.md`, `implementation_plan.md`) は**一時的な作業用**として使用してください。
3.  **知識の永続化**: タスクの成果や得られた知見は、必ず `antigravity` フォルダ内の適切な `_CONTEXT.md` ファイルに集約・永続化してください。

## 手順

### 1. 前提知識の確認 (Context Loading)

タスクを開始する前に、まず `antigravity` フォルダ内の関連する `_CONTEXT.md` ファイルを読み込み、プロジェクトの文脈や既存の設計方針を確認してください。

### 2. タスクの定義 (Task Definition)

タスクを開始する前に、`task_boundary` ツールを使用してタスク境界を設定してください。
初期状態の `Mode` は `PLANNING` に設定します。

### 3. タスクリストの作成 (Task List)

`task.md` ファイルを作成（または更新）し、タスクを以下の形式で定義してください。
必ず日本語で記述してください。

```markdown
# タスク: [タスク名]

- [ ] 現状の調査と分析
- [ ] 実装計画の作成
- [ ] [具体的な実装ステップ1]
- [ ] [具体的な実装ステップ2]
- [ ] ...
- [ ] 動作確認と修正
```

### 4. 実装計画の作成 (Implementation Plan)

`implementation_plan.md` を作成し、以下のセクションを日本語で記述してください。

```markdown
# 実装計画: [タスク名]

## 目的

[この変更の目的と背景]

## 変更内容

[変更するファイルと具体的な内容の説明]
[NEW] / [MODIFY] / [DELETE] を明確にしてください。

### [コンポーネント名/ディレクトリ名]

#### [MODIFY] [ファイル名](file:///path/to/file)

- 変更点の説明

## 検証計画

[どのように動作確認を行うか]

### 自動テスト

- 実行するコマンド等

### 手動検証

- 確認する手順
```

### 5. ユーザー確認

計画作成後、`notify_user` ツールを使用して、作成した計画 (`implementation_plan.md` 等) についてユーザーにレビューを依頼してください。
メッセージも日本語で記述してください。

### 6. Antigravityへの同期 (Knowledge Sync)

タスク完了後、以下の手順で情報を永続化してください。

1.  **対象ファイルの選定**: `antigravity` フォルダ内を検索し、今回の変更に関連するファイル（例: `main/index_CONTEXT.md`, `pos/mobile-order_status_CONTEXT.md` 等）を特定してください。適切なファイルがない場合は新規作成してください。
2.  **情報の追記・更新**: 特定したファイルに対し、以下の内容を追記・更新してください。
    - 実装した機能の仕様
    - 重要な決定事項や理由
    - 今後の保守に必要な注意点
    - （必要であれば）ファイル構造や依存関係の更新

    ※ `task.md` や `implementation_plan.md` はタスク完了後に参照されなくなる可能性があるため、**将来的に必要な情報は全て `antigravity` 配下に移動**させてください。

3.  **完了報告**: ユーザーへの完了報告時に、「どの情報をどのファイル(`antigravity/xxx.md`)に記録したか」を明記してください。
